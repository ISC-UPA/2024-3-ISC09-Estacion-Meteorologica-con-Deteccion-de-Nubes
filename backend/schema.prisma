// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                   String    @id @default(cuid())
  name                 String    @default("")
  email                String    @unique @default("")
  password             String
  phone                String    @default("")
  premiun_sucription   Boolean   @default(true)
  creation_date        DateTime? @default(now())
  end_suscription_date DateTime?
  device_id            Device[]  @relation("User_device_id")
}

model Device {
  id                           String          @id @default(cuid())
  name                         String          @default("")
  creation_date                DateTime?       @default(now())
  from_User_device_id          User[]          @relation("User_device_id")
  from_PhotoSky_device_id      PhotoSky[]      @relation("PhotoSky_device_id")
  from_WeatheReading_device_id WeatheReading[] @relation("WeatheReading_device_id")
}

model PhotoSky {
  id                             String          @id @default(cuid())
  device_id                      Device[]        @relation("PhotoSky_device_id")
  url_photo                      String          @default("")
  latitude                       Float
  longitude                      Float
  api                            Boolean         @default(false)
  date_photo                     DateTime?       @default(now())
  favorite                       Boolean         @default(false)
  from_AnalysisPhoto_skyphoto_id AnalysisPhoto[] @relation("AnalysisPhoto_skyphoto_id")
  from_APIPredicion_skyphoto_id  APIPredicion[]  @relation("APIPredicion_skyphoto_id")
}

model WeatheReading {
  id                   String    @id @default(cuid())
  temperature          Float
  atmospheric_pressure Float?
  humidity             Float
  api                  Boolean   @default(false)
  reading_date         DateTime? @default(now())
  device_id            Device[]  @relation("WeatheReading_device_id")
}

model AnalysisPhoto {
  id               String    @id @default(cuid())
  skyphoto_id      PhotoSky? @relation("AnalysisPhoto_skyphoto_id", fields: [skyphoto_idId], references: [id])
  skyphoto_idId    String?   @map("skyphoto_id")
  sky_type         String    @default("")
  probability_rain String    @default("")

  @@index([skyphoto_idId])
}

model APIPredicion {
  id                  String    @id @default(cuid())
  skyphoto_id         PhotoSky? @relation("APIPredicion_skyphoto_id", fields: [skyphoto_idId], references: [id])
  skyphoto_idId       String?   @map("skyphoto_id")
  prediction_per_day  String    @default("")
  prediction_per_hour String    @default("")

  @@index([skyphoto_idId])
}
